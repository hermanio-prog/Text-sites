<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulador de Escola de Condu√ß√£o</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f0f7ff;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 20px 0;
            border-radius: 0 0 15px 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            text-align: center;
            margin-bottom: 30px;
        }
        
        header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        header p {
            font-size: 1.2rem;
            opacity: 0.9;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .game-container {
            display: flex;
            flex-direction: column;
            gap: 30px;
        }
        
        .main-menu {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .menu-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            transition: transform 0.3s, box-shadow 0.3s;
            cursor: pointer;
            border-left: 5px solid #2a5298;
        }
        
        .menu-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
        }
        
        .menu-card i {
            font-size: 3rem;
            color: #2a5298;
            margin-bottom: 15px;
        }
        
        .menu-card h3 {
            font-size: 1.5rem;
            margin-bottom: 10px;
            color: #1e3c72;
        }
        
        .menu-card p {
            color: #666;
            margin-bottom: 15px;
        }
        
        .status-bar {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .progress-section {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .progress-circle {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: conic-gradient(#4CAF50 0% 75%, #eee 75% 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        
        .progress-circle::before {
            content: '';
            position: absolute;
            width: 70px;
            height: 70px;
            background: white;
            border-radius: 50%;
        }
        
        .progress-circle span {
            position: relative;
            font-weight: bold;
            font-size: 1.2rem;
            color: #1e3c72;
        }
        
        .game-content {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            min-height: 500px;
            display: none;
        }
        
        .game-content.active {
            display: block;
        }
        
        .quiz-question {
            font-size: 1.3rem;
            margin-bottom: 25px;
            color: #1e3c72;
            font-weight: 600;
        }
        
        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .quiz-option {
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .quiz-option:hover {
            background-color: #f5f9ff;
        }
        
        .quiz-option.selected {
            border-color: #2a5298;
            background-color: #e8efff;
        }
        
        .quiz-option.correct {
            border-color: #4CAF50;
            background-color: #e8f5e9;
        }
        
        .quiz-option.wrong {
            border-color: #f44336;
            background-color: #ffebee;
        }
        
        .quiz-controls {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }
        
        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .btn-primary {
            background-color: #2a5298;
            color: white;
        }
        
        .btn-primary:hover {
            background-color: #1e3c72;
        }
        
        .btn-secondary {
            background-color: #6c757d;
            color: white;
        }
        
        .btn-secondary:hover {
            background-color: #5a6268;
        }
        
        .btn-success {
            background-color: #4CAF50;
            color: white;
        }
        
        .btn-success:hover {
            background-color: #388e3c;
        }
        
        .signal-game {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 30px;
        }
        
        .signal-display {
            width: 200px;
            height: 200px;
            background-color: #f8f9fa;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 5rem;
            color: #1e3c72;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }
        
        .signal-options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            width: 100%;
            max-width: 600px;
        }
        
        .signal-option {
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .signal-option:hover {
            background-color: #e8efff;
        }
        
        .parking-game {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .parking-area {
            width: 100%;
            height: 400px;
            background-color: #e0e0e0;
            border-radius: 10px;
            position: relative;
            overflow: hidden;
            margin-bottom: 20px;
            border: 3px solid #333;
        }
        
        .car {
            width: 60px;
            height: 100px;
            background-color: #ff5722;
            position: absolute;
            border-radius: 5px;
            transition: all 0.5s;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }
        
        .parking-spot {
            position: absolute;
            border: 2px dashed #333;
            background-color: rgba(255, 255, 255, 0.7);
        }
        
        .car-controls {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .car-controls .btn {
            min-width: 100px;
        }
        
        .result-message {
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            font-size: 1.2rem;
            margin: 20px 0;
            display: none;
        }
        
        .result-message.success {
            background-color: #e8f5e9;
            color: #2e7d32;
            border: 2px solid #4CAF50;
            display: block;
        }
        
        .result-message.error {
            background-color: #ffebee;
            color: #c62828;
            border: 2px solid #f44336;
            display: block;
        }
        
        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }
        
        .back-btn {
            background: none;
            border: none;
            font-size: 1.5rem;
            color: #2a5298;
            cursor: pointer;
        }
        
        .game-stats {
            display: flex;
            gap: 20px;
            color: #666;
        }
        
        footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            color: #666;
            font-size: 0.9rem;
        }
        
        @media (max-width: 768px) {
            .main-menu {
                grid-template-columns: 1fr;
            }
            
            .status-bar {
                flex-direction: column;
                gap: 20px;
                text-align: center;
            }
            
            .signal-options {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1><i class="fas fa-car"></i> Simulador de Escola de Condu√ß√£o</h1>
            <p>Prepare-se para o exame de condu√ß√£o com este jogo educativo. Teste seus conhecimentos e habilidades!</p>
        </div>
    </header>
    
    <div class="container">
        <div class="status-bar">
            <div>
                <h2>Bem-vindo, Futuro Condutor!</h2>
                <p>Complete os m√≥dulos para se preparar para o exame</p>
            </div>
            
            <div class="progress-section">
                <div class="progress-circle">
                    <span id="progressPercentage">0%</span>
                </div>
                <div>
                    <h3>Progresso Geral</h3>
                    <p id="progressText">0 de 4 m√≥dulos completados</p>
                </div>
            </div>
        </div>
        
        <div class="game-container">
            <div class="main-menu" id="mainMenu">
                <div class="menu-card" data-game="quiz">
                    <i class="fas fa-question-circle"></i>
                    <h3>Quiz Te√≥rico</h3>
                    <p>Teste seus conhecimentos sobre as regras de tr√¢nsito com quest√µes de m√∫ltipla escolha.</p>
                    <span class="btn btn-primary">Iniciar Quiz</span>
                </div>
                
                <div class="menu-card" data-game="signals">
                    <i class="fas fa-traffic-light"></i>
                    <h3>Reconhecimento de Sinais</h3>
                    <p>Aprenda a identificar os diferentes sinais de tr√¢nsito e seu significado.</p>
                    <span class="btn btn-primary">Treinar Sinais</span>
                </div>
                
                <div class="menu-card" data-game="parking">
                    <i class="fas fa-parking"></i>
                    <h3>Estacionamento</h3>
                    <p>Pratique suas habilidades de estacionamento em diferentes cen√°rios.</p>
                    <span class="btn btn-primary">Praticar</span>
                </div>
                
                <div class="menu-card" data-game="priority">
                    <i class="fas fa-exchange-alt"></i>
                    <h3>Prioridades no Tr√¢nsito</h3>
                    <p>Aprenda a identificar quem tem prioridade em cruzamentos e rotundas.</p>
                    <span class="btn btn-primary">Treinar</span>
                </div>
            </div>
            
            <!-- Quiz Te√≥rico -->
            <div class="game-content" id="quizGame">
                <div class="game-header">
                    <button class="back-btn" id="backFromQuiz"><i class="fas fa-arrow-left"></i> Voltar</button>
                    <div>
                        <h2>Quiz Te√≥rico</h2>
                        <div class="game-stats">
                            <span><i class="fas fa-check-circle"></i> Pontua√ß√£o: <span id="quizScore">0</span></span>
                            <span><i class="fas fa-question-circle"></i> Quest√£o: <span id="quizQuestionNum">1</span>/5</span>
                        </div>
                    </div>
                </div>
                
                <div class="quiz-question" id="quizQuestion">
                    Carregando quest√£o...
                </div>
                
                <div class="quiz-options" id="quizOptions">
                    <!-- As op√ß√µes ser√£o carregadas via JavaScript -->
                </div>
                
                <div class="result-message" id="quizResult"></div>
                
                <div class="quiz-controls">
                    <button class="btn btn-secondary" id="quizHint">Dica</button>
                    <button class="btn btn-primary" id="quizSubmit" disabled>Confirmar Resposta</button>
                    <button class="btn btn-success" id="quizNext" style="display: none;">Pr√≥xima Quest√£o</button>
                </div>
            </div>
            
            <!-- Reconhecimento de Sinais -->
            <div class="game-content" id="signalsGame">
                <div class="game-header">
                    <button class="back-btn" id="backFromSignals"><i class="fas fa-arrow-left"></i> Voltar</button>
                    <div>
                        <h2>Reconhecimento de Sinais</h2>
                        <div class="game-stats">
                            <span><i class="fas fa-check-circle"></i> Acertos: <span id="signalsScore">0</span></span>
                            <span><i class="fas fa-traffic-light"></i> Sinal: <span id="signalNum">1</span>/6</span>
                        </div>
                    </div>
                </div>
                
                <div class="signal-game">
                    <div class="signal-display" id="signalDisplay">
                        <i class="fas fa-traffic-light"></i>
                    </div>
                    
                    <div class="quiz-question" id="signalQuestion">
                        O que significa este sinal de tr√¢nsito?
                    </div>
                    
                    <div class="signal-options" id="signalOptions">
                        <!-- As op√ß√µes ser√£o carregadas via JavaScript -->
                    </div>
                    
                    <div class="result-message" id="signalResult"></div>
                    
                    <div class="quiz-controls">
                        <button class="btn btn-primary" id="signalSubmit" disabled>Confirmar Resposta</button>
                        <button class="btn btn-success" id="signalNext" style="display: none;">Pr√≥ximo Sinal</button>
                    </div>
                </div>
            </div>
            
            <!-- Estacionamento -->
            <div class="game-content" id="parkingGame">
                <div class="game-header">
                    <button class="back-btn" id="backFromParking"><i class="fas fa-arrow-left"></i> Voltar</button>
                    <div>
                        <h2>Estacionamento</h2>
                        <div class="game-stats">
                            <span><i class="fas fa-car"></i> Manobras: <span id="parkingMoves">0</span></span>
                            <span><i class="fas fa-flag-checkered"></i> Objetivo: Estacionar o carro</span>
                        </div>
                    </div>
                </div>
                
                <div class="parking-game">
                    <div class="parking-area" id="parkingArea">
                        <!-- Carro e vagas ser√£o adicionadas via JavaScript -->
                    </div>
                    
                    <div class="car-controls">
                        <button class="btn btn-secondary" id="carLeft"><i class="fas fa-arrow-left"></i> Esquerda</button>
                        <button class="btn btn-secondary" id="carRight"><i class="fas fa-arrow-right"></i> Direita</button>
                        <button class="btn btn-secondary" id="carUp"><i class="fas fa-arrow-up"></i> Frente</button>
                        <button class="btn btn-secondary" id="carDown"><i class="fas fa-arrow-down"></i> Tr√°s</button>
                        <button class="btn btn-primary" id="carRotate"><i class="fas fa-redo"></i> Girar</button>
                        <button class="btn btn-success" id="parkCar">Estacionar</button>
                        <button class="btn btn-secondary" id="resetParking">Reiniciar</button>
                    </div>
                    
                    <div class="result-message" id="parkingResult"></div>
                    
                    <div class="quiz-controls">
                        <button class="btn btn-primary" id="parkingHint">Dica de Estacionamento</button>
                    </div>
                </div>
            </div>
            
            <!-- Prioridades no Tr√¢nsito -->
            <div class="game-content" id="priorityGame">
                <div class="game-header">
                    <button class="back-btn" id="backFromPriority"><i class="fas fa-arrow-left"></i> Voltar</button>
                    <div>
                        <h2>Prioridades no Tr√¢nsito</h2>
                        <div class="game-stats">
                            <span><i class="fas fa-check-circle"></i> Acertos: <span id="priorityScore">0</span></span>
                            <span><i class="fas fa-crosshairs"></i> Cen√°rio: <span id="priorityNum">1</span>/4</span>
                        </div>
                    </div>
                </div>
                
                <div class="quiz-question" id="priorityQuestion">
                    Carregando cen√°rio...
                </div>
                
                <div class="quiz-options" id="priorityOptions">
                    <!-- As op√ß√µes ser√£o carregadas via JavaScript -->
                </div>
                
                <div class="result-message" id="priorityResult"></div>
                
                <div class="quiz-controls">
                    <button class="btn btn-primary" id="prioritySubmit" disabled>Confirmar Resposta</button>
                    <button class="btn btn-success" id="priorityNext" style="display: none;">Pr√≥ximo Cen√°rio</button>
                </div>
            </div>
        </div>
    </div>
    
    <footer>
        <div class="container">
            <p>Simulador de Escola de Condu√ß√£o &copy; 2023 - Desenvolvido para ajudar futuros condutores a passarem no exame</p>
            <p>Este jogo √© educativo e n√£o substitui a forma√ß√£o oficial de uma escola de condu√ß√£o.</p>
        </div>
    </footer>

    <script>
        // Dados do jogo - AGORA COMPLETOS E FUNCIONAIS
        const gameData = {
            quiz: {
                currentQuestion: 0,
                score: 0,
                completed: false,
                questions: [
                    {
                        question: "Em uma via com duas faixas por sentido, qual √© a faixa correta para seguir em frente?",
                        options: [
                            "Faixa da direita",
                            "Faixa da esquerda", 
                            "Qualquer uma das faixas",
                            "Depende da velocidade"
                        ],
                        correct: 0,
                        hint: "A faixa da direita √© a mais indicada para seguir em frente, deixando a esquerda para ultrapassagens."
                    },
                    {
                        question: "Qual a dist√¢ncia m√≠nima de seguran√ßa que deve manter em rela√ß√£o ao ve√≠culo da frente?",
                        options: [
                            "Dist√¢ncia equivalente a 2 segundos",
                            "Dist√¢ncia equivalente a 1 segundo",
                            "Dist√¢ncia de 10 metros",
                            "Dist√¢ncia de 5 metros"
                        ],
                        correct: 0,
                        hint: "A dist√¢ncia de seguran√ßa deve ser de pelo menos 2 segundos em condi√ß√µes normais."
                    },
                    {
                        question: "O que deve fazer ao aproximar-se de uma passadeira para pe√µes?",
                        options: [
                            "Reduzir a velocidade e estar preparado para parar",
                            "Acelerar para passar rapidamente",
                            "Manter a velocidade se n√£o vir pe√µes",
                            "Buzinar para alertar os pe√µes"
                        ],
                        correct: 0,
                        hint: "Sempre reduza a velocidade ao aproximar-se de uma passadeira e esteja preparado para parar."
                    },
                    {
                        question: "Quando √© obrigat√≥rio o uso de luzes de cruzamento (m√©dios)?",
                        options: [
                            "Durante a noite e em condi√ß√µes de visibilidade reduzida",
                            "Apenas em autoestradas",
                            "Apenas dentro das localidades",
                            "Nunca √© obrigat√≥rio"
                        ],
                        correct: 0,
                        hint: "As luzes de cruzamento s√£o obrigat√≥rias durante a noite e em condi√ß√µes de visibilidade reduzida."
                    },
                    {
                        question: "O que indica uma linha cont√≠nua na estrada?",
                        options: [
                            "Proibi√ß√£o de ultrapassar",
                            "Pode ultrapassar com cuidado",
                            "Estacionamento permitido",
                            "Via de sentido √∫nico"
                        ],
                        correct: 0,
                        hint: "Uma linha cont√≠nua indica que √© proibido ultrapassar."
                    }
                ]
            },
            signals: {
                currentSignal: 0,
                score: 0,
                completed: false,
                signals: [
                    {
                        icon: "fas fa-triangle-exclamation",
                        color: "#ff9800",
                        question: "O que significa este sinal de tr√¢nsito?",
                        options: [
                            "Proibido estacionar",
                            "Aviso de perigo",
                            "Obriga√ß√£o de virar √† direita",
                            "Paragem obrigat√≥ria"
                        ],
                        correct: 1,
                        explanation: "Este √© um sinal de aviso de perigo. Indica que h√° uma situa√ß√£o de perigo √† frente, como uma curva perigosa, cruzamento ou obras."
                    },
                    {
                        icon: "fas fa-stop",
                        color: "#f44336",
                        question: "O que deve fazer ao encontrar este sinal?",
                        options: [
                            "Parar obrigatoriamente",
                            "Reduzir a velocidade",
                            "Acelerar rapidamente",
                            "Virar √† esquerda"
                        ],
                        correct: 0,
                        explanation: "Este √© o sinal de paragem obrigat√≥ria. Deve parar completamente antes de prosseguir."
                    },
                    {
                        icon: "fas fa-ban",
                        color: "#f44336",
                        question: "O que indica este sinal circular vermelho?",
                        options: [
                            "Proibido estacionar",
                            "Sentido proibido",
                            "Proibido ultrapassar",
                            "Velocidade m√≠nima"
                        ],
                        correct: 1,
                        explanation: "Este sinal indica sentido proibido. N√£o pode entrar na via onde este sinal est√° colocado."
                    },
                    {
                        icon: "fas fa-arrow-up",
                        color: "#2196f3",
                        question: "O que significa este sinal azul com seta branca?",
                        options: [
                            "Obriga√ß√£o de seguir em frente",
                            "Sentido √∫nico",
                            "Paragem obrigat√≥ria",
                            "Proibido virar √† direita"
                        ],
                        correct: 0,
                        explanation: "Este sinal indica obriga√ß√£o de seguir em frente. N√£o pode virar √† esquerda ou √† direita."
                    },
                    {
                        icon: "fas fa-person-walking",
                        color: "#4caf50",
                        question: "O que indica este sinal?",
                        options: [
                            "Passagem para pe√µes",
                            "Proibido a pe√µes",
                            "√Årea residencial",
                            "Ciclistas na via"
                        ],
                        correct: 0,
                        explanation: "Este sinal indica passagem para pe√µes. Deve reduzir a velocidade e ceder passagem aos pe√µes."
                    },
                    {
                        icon: "fas fa-bicycle",
                        color: "#2196f3",
                        question: "O que significa este sinal?",
                        options: [
                            "Pista para ciclistas",
                            "Proibido a ciclistas",
                            "Ciclistas a atravessar",
                            "Estacionamento de bicicletas"
                        ],
                        correct: 0,
                        explanation: "Este sinal indica pista ou via reservada para ciclistas."
                    }
                ]
            },
            priority: {
                currentScenario: 0,
                score: 0,
                completed: false,
                scenarios: [
                    {
                        question: "Em um cruzamento sem sinaliza√ß√£o, quem tem prioridade de passagem?",
                        options: [
                            "O ve√≠culo que chegar primeiro ao cruzamento",
                            "O ve√≠culo que vem pela direita",
                            "O ve√≠culo maior",
                            "O ve√≠culo mais r√°pido"
                        ],
                        correct: 1,
                        hint: "A regra geral √© dar prioridade ao ve√≠culo que vem pela direita em cruzamentos n√£o sinalizados."
                    },
                    {
                        question: "Numa rotunda, qual a prioridade correta?",
                        options: [
                            "Os ve√≠culos que j√° est√£o na rotunda t√™m prioridade",
                            "Os ve√≠culos que v√£o entrar na rotunda t√™m prioridade",
                            "O ve√≠culo maior tem sempre prioridade",
                            "O ve√≠culo mais r√°pido tem prioridade"
                        ],
                        correct: 0,
                        hint: "Na rotunda, os ve√≠culos que j√° est√£o circulando t√™m prioridade sobre os que pretendem entrar."
                    },
                    {
                        question: "Ao sair de um parque de estacionamento para a via p√∫blica, quem tem prioridade?",
                        options: [
                            "Os ve√≠culos na via p√∫blica",
                            "O ve√≠culo que sai do parque",
                            "O ve√≠culo que buzinar primeiro",
                            "Depende da hora do dia"
                        ],
                        correct: 0,
                        hint: "Ao sair de uma propriedade privada para a via p√∫blica, deve dar prioridade a todos os ve√≠culos na via p√∫blica."
                    },
                    {
                        question: "Quando um ve√≠culo de emerg√™ncia (ambul√¢ncia, bombeiros) se aproxima com sinais luminosos e sonoros, o que deve fazer?",
                        options: [
                            "Ceder passagem imediatamente, desviando-se se necess√°rio",
                            "Manter a posi√ß√£o e velocidade",
                            "Acelerar para sair rapidamente do caminho",
                            "Parar imediatamente no meio da via"
                        ],
                        correct: 0,
                        hint: "Deve ceder passagem imediatamente aos ve√≠culos de emerg√™ncia, desviando-se para a direita se poss√≠vel."
                    }
                ]
            },
            parking: {
                completed: false
            }
        };

        // Estado global do jogo
        let currentGame = null;
        let selectedOption = null;
        let parkingMoves = 0;
        let carRotation = 0;
        let carPosition = { x: 50, y: 50 };
        let progress = {
            quiz: false,
            signals: false,
            parking: false,
            priority: false
        };

        // Elementos do DOM
        const mainMenu = document.getElementById('mainMenu');
        const quizGame = document.getElementById('quizGame');
        const signalsGame = document.getElementById('signalsGame');
        const parkingGame = document.getElementById('parkingGame');
        const priorityGame = document.getElementById('priorityGame');

        // Inicializa√ß√£o do jogo
        function initGame() {
            // Configurar menu principal
            const menuCards = document.querySelectorAll('.menu-card');
            menuCards.forEach(card => {
                card.addEventListener('click', function() {
                    const game = this.getAttribute('data-game');
                    startGame(game);
                });
            });

            // Configurar bot√µes de voltar
            document.getElementById('backFromQuiz').addEventListener('click', () => showMainMenu());
            document.getElementById('backFromSignals').addEventListener('click', () => showMainMenu());
            document.getElementById('backFromParking').addEventListener('click', () => showMainMenu());
            document.getElementById('backFromPriority').addEventListener('click', () => showMainMenu());

            // Configurar jogo de quiz
            setupQuizGame();
            
            // Configurar jogo de sinais
            setupSignalsGame();
            
            // Configurar jogo de estacionamento
            setupParkingGame();
            
            // Configurar jogo de prioridades
            setupPriorityGame();
            
            // Atualizar progresso inicial
            updateProgress();
        }

        // Atualizar barra de progresso
        function updateProgress() {
            let completedCount = 0;
            if (progress.quiz) completedCount++;
            if (progress.signals) completedCount++;
            if (progress.parking) completedCount++;
            if (progress.priority) completedCount++;
            
            const percentage = Math.round((completedCount / 4) * 100);
            document.getElementById('progressPercentage').textContent = `${percentage}%`;
            document.getElementById('progressText').textContent = `${completedCount} de 4 m√≥dulos completados`;
            
            // Atualizar c√≠rculo de progresso
            const progressCircle = document.querySelector('.progress-circle');
            progressCircle.style.background = `conic-gradient(#4CAF50 0% ${percentage}%, #eee ${percentage}% 100%)`;
        }

        // Fun√ß√µes do jogo
        function startGame(game) {
            currentGame = game;
            mainMenu.style.display = 'none';
            
            // Esconder todos os jogos
            quizGame.classList.remove('active');
            signalsGame.classList.remove('active');
            parkingGame.classList.remove('active');
            priorityGame.classList.remove('active');
            
            // Mostrar o jogo selecionado
            switch(game) {
                case 'quiz':
                    startQuiz();
                    quizGame.classList.add('active');
                    break;
                case 'signals':
                    startSignals();
                    signalsGame.classList.add('active');
                    break;
                case 'parking':
                    startParking();
                    parkingGame.classList.add('active');
                    break;
                case 'priority':
                    startPriority();
                    priorityGame.classList.add('active');
                    break;
            }
        }

        function showMainMenu() {
            currentGame = null;
            quizGame.classList.remove('active');
            signalsGame.classList.remove('active');
            parkingGame.classList.remove('active');
            priorityGame.classList.remove('active');
            mainMenu.style.display = 'grid';
        }

        // Quiz Te√≥rico
        function setupQuizGame() {
            document.getElementById('quizSubmit').addEventListener('click', submitQuizAnswer);
            document.getElementById('quizNext').addEventListener('click', nextQuizQuestion);
            document.getElementById('quizHint').addEventListener('click', showQuizHint);
        }

        function startQuiz() {
            gameData.quiz.currentQuestion = 0;
            gameData.quiz.score = 0;
            gameData.quiz.completed = false;
            updateQuizUI();
        }

        function updateQuizUI() {
            const quiz = gameData.quiz;
            const currentQ = quiz.questions[quiz.currentQuestion];
            
            document.getElementById('quizQuestion').textContent = currentQ.question;
            document.getElementById('quizQuestionNum').textContent = quiz.currentQuestion + 1;
            document.getElementById('quizScore').textContent = quiz.score;
            
            const optionsContainer = document.getElementById('quizOptions');
            optionsContainer.innerHTML = '';
            
            currentQ.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'quiz-option';
                optionElement.dataset.option = String.fromCharCode(65 + index); // A, B, C, D
                optionElement.textContent = option;
                
                optionElement.addEventListener('click', function() {
                    // Remover sele√ß√£o anterior
                    document.querySelectorAll('#quizOptions .quiz-option').forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    
                    // Selecionar nova op√ß√£o
                    this.classList.add('selected');
                    selectedOption = this.dataset.option;
                    
                    // Ativar bot√£o de confirmar
                    document.getElementById('quizSubmit').disabled = false;
                });
                
                optionsContainer.appendChild(optionElement);
            });
            
            document.getElementById('quizSubmit').disabled = true;
            document.getElementById('quizSubmit').style.display = 'block';
            document.getElementById('quizNext').style.display = 'none';
            document.getElementById('quizResult').className = 'result-message';
            document.getElementById('quizResult').textContent = '';
        }

        function submitQuizAnswer() {
            const quiz = gameData.quiz;
            const currentQ = quiz.questions[quiz.currentQuestion];
            const options = document.querySelectorAll('#quizOptions .quiz-option');
            const resultMessage = document.getElementById('quizResult');
            
            // Verificar resposta
            const correctIndex = currentQ.correct;
            const selectedIndex = selectedOption.charCodeAt(0) - 65; // Converter A, B, C, D para 0, 1, 2, 3
            
            if (selectedIndex === correctIndex) {
                // Resposta correta
                quiz.score += 20;
                options[selectedIndex].classList.add('correct');
                resultMessage.textContent = "‚úì Resposta correta! Bom trabalho!";
                resultMessage.className = 'result-message success';
            } else {
                // Resposta incorreta
                options[selectedIndex].classList.add('wrong');
                options[correctIndex].classList.add('correct');
                resultMessage.textContent = `‚úó Resposta incorreta. A resposta correta √©: ${currentQ.options[correctIndex]}`;
                resultMessage.className = 'result-message error';
            }
            
            // Atualizar pontua√ß√£o
            document.getElementById('quizScore').textContent = quiz.score;
            
            // Mostrar bot√£o para pr√≥xima pergunta
            document.getElementById('quizSubmit').style.display = 'none';
            document.getElementById('quizNext').style.display = 'block';
        }

        function nextQuizQuestion() {
            gameData.quiz.currentQuestion++;
            
            if (gameData.quiz.currentQuestion < gameData.quiz.questions.length) {
                updateQuizUI();
            } else {
                // Fim do quiz
                gameData.quiz.completed = true;
                progress.quiz = true;
                updateProgress();
                
                document.getElementById('quizQuestion').textContent = "Quiz conclu√≠do!";
                document.getElementById('quizQuestionNum').textContent = "5/5";
                
                const optionsContainer = document.getElementById('quizOptions');
                optionsContainer.innerHTML = `
                    <div style="text-align: center; padding: 30px;">
                        <h3 style="color: #1e3c72; margin-bottom: 15px;">Resultado Final</h3>
                        <p style="font-size: 1.2rem; margin-bottom: 10px;">Sua pontua√ß√£o: <strong>${gameData.quiz.score} de 100 pontos</strong></p>
                        <p style="font-size: 1.1rem; color: ${gameData.quiz.score >= 70 ? '#4CAF50' : '#f44336'}">
                            ${gameData.quiz.score >= 70 ? "üéâ Parab√©ns! Voc√™ est√° preparado para o exame te√≥rico!" : "üìö Continue estudando para melhorar seu desempenho!"}
                        </p>
                    </div>
                `;
                
                document.getElementById('quizSubmit').style.display = 'none';
                document.getElementById('quizNext').style.display = 'none';
                document.getElementById('quizResult').className = 'result-message';
                document.getElementById('quizResult').textContent = '';
            }
        }

        function showQuizHint() {
            const quiz = gameData.quiz;
            const currentQ = quiz.questions[quiz.currentQuestion];
            const resultMessage = document.getElementById('quizResult');
            
            resultMessage.textContent = `üí° Dica: ${currentQ.hint}`;
            resultMessage.className = 'result-message success';
        }

        // Reconhecimento de Sinais
        function setupSignalsGame() {
            document.getElementById('signalSubmit').addEventListener('click', submitSignalAnswer);
            document.getElementById('signalNext').addEventListener('click', nextSignal);
        }

        function startSignals() {
            gameData.signals.currentSignal = 0;
            gameData.signals.score = 0;
            gameData.signals.completed = false;
            updateSignalsUI();
        }

        function updateSignalsUI() {
            const signals = gameData.signals;
            const currentS = signals.signals[signals.currentSignal];
            
            const signalDisplay = document.getElementById('signalDisplay');
            signalDisplay.innerHTML = `<i class="${currentS.icon}"></i>`;
            signalDisplay.style.color = currentS.color;
            
            document.getElementById('signalQuestion').textContent = currentS.question;
            document.getElementById('signalNum').textContent = signals.currentSignal + 1;
            document.getElementById('signalsScore').textContent = signals.score;
            
            const optionsContainer = document.getElementById('signalOptions');
            optionsContainer.innerHTML = '';
            
            currentS.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'signal-option';
                optionElement.dataset.option = String.fromCharCode(65 + index);
                optionElement.textContent = option;
                
                optionElement.addEventListener('click', function() {
                    // Remover sele√ß√£o anterior
                    document.querySelectorAll('#signalOptions .signal-option').forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    
                    // Selecionar nova op√ß√£o
                    this.classList.add('selected');
                    selectedOption = this.dataset.option;
                    
                    // Ativar bot√£o de confirmar
                    document.getElementById('signalSubmit').disabled = false;
                });
                
                optionsContainer.appendChild(optionElement);
            });
            
            document.getElementById('signalSubmit').disabled = true;
            document.getElementById('signalSubmit').style.display = 'block';
            document.getElementById('signalNext').style.display = 'none';
            document.getElementById('signalResult').className = 'result-message';
            document.getElementById('signalResult').textContent = '';
        }

        function submitSignalAnswer() {
            const signals = gameData.signals;
            const currentS = signals.signals[signals.currentSignal];
            const options = document.querySelectorAll('#signalOptions .signal-option');
            const resultMessage = document.getElementById('signalResult');
            
            // Verificar resposta
            const correctIndex = currentS.correct;
            const selectedIndex = selectedOption.charCodeAt(0) - 65;
            
            if (selectedIndex === correctIndex) {
                // Resposta correta
                signals.score++;
                options[selectedIndex].classList.add('correct');
                resultMessage.textContent = `‚úì Correto! ${currentS.explanation}`;
                resultMessage.className = 'result-message success';
            } else {
                // Resposta incorreta
                options[selectedIndex].classList.add('wrong');
                options[correctIndex].classList.add('correct');
                resultMessage.textContent = `‚úó Incorreto. ${currentS.explanation}`;
                resultMessage.className = 'result-message error';
            }
            
            // Atualizar pontua√ß√£o
            document.getElementById('signalsScore').textContent = signals.score;
            
            // Mostrar bot√£o para pr√≥ximo sinal
            document.getElementById('signalSubmit').style.display = 'none';
            document.getElementById('signalNext').style.display = 'block';
        }

        function nextSignal() {
            gameData.signals.currentSignal++;
            
            if (gameData.signals.currentSignal < gameData.signals.signals.length) {
                updateSignalsUI();
            } else {
                // Fim do jogo de sinais
                gameData.signals.completed = true;
                progress.signals = true;
                updateProgress();
                
                document.getElementById('signalQuestion').textContent = "Treino de sinais conclu√≠do!";
                document.getElementById('signalNum').textContent = "6/6";
                
                const signalDisplay = document.getElementById('signalDisplay');
                signalDisplay.innerHTML = '<i class="fas fa-flag-checkered"></i>';
                signalDisplay.style.color = '#4CAF50';
                
                const optionsContainer = document.getElementById('signalOptions');
                optionsContainer.innerHTML = `
                    <div style="text-align: center; padding: 20px; grid-column: 1 / -1;">
                        <h3 style="color: #1e3c72; margin-bottom: 15px;">Resultado Final</h3>
                        <p style="font-size: 1.2rem; margin-bottom: 10px;">Voc√™ acertou <strong>${gameData.signals.score} de 6 sinais</strong></p>
                        <p style="font-size: 1.1rem; color: ${gameData.signals.score >= 5 ? '#4CAF50' : '#f44336'}">
                            ${gameData.signals.score >= 5 ? "üèÜ Excelente! Voc√™ conhece bem os sinais de tr√¢nsito!" : "üìò Continue praticando para reconhecer todos os sinais!"}
                        </p>
                    </div>
                `;
                
                document.getElementById('signalSubmit').style.display = 'none';
                document.getElementById('signalNext').style.display = 'none';
                document.getElementById('signalResult').className = 'result-message';
                document.getElementById('signalResult').textContent = '';
            }
        }

        // Estacionamento
        function setupParkingGame() {
            document.getElementById('carLeft').addEventListener('click', () => moveCar('left'));
            document.getElementById('carRight').addEventListener('click', () => moveCar('right'));
            document.getElementById('carUp').addEventListener('click', () => moveCar('up'));
            document.getElementById('carDown').addEventListener('click', () => moveCar('down'));
            document.getElementById('carRotate').addEventListener('click', rotateCar);
            document.getElementById('parkCar').addEventListener('click', checkParking);
            document.getElementById('resetParking').addEventListener('click', resetParking);
            document.getElementById('parkingHint').addEventListener('click', showParkingHint);
        }

        function startParking() {
            const parkingArea = document.getElementById('parkingArea');
            parkingArea.innerHTML = '';
            
            // Criar carro
            const car = document.createElement('div');
            car.id = 'car';
            car.className = 'car';
            car.textContent = 'C';
            car.style.top = '50px';
            car.style.left = '50px';
            car.style.transform = 'rotate(0deg)';
            parkingArea.appendChild(car);
            
            // Criar vagas de estacionamento
            const parkingSpot1 = document.createElement('div');
            parkingSpot1.className = 'parking-spot';
            parkingSpot1.id = 'parkingSpot1';
            parkingSpot1.style.width = '80px';
            parkingSpot1.style.height = '120px';
            parkingSpot1.style.top = '200px';
            parkingSpot1.style.left = '300px';
            parkingArea.appendChild(parkingSpot1);
            
            const parkingSpot2 = document.createElement('div');
            parkingSpot2.className = 'parking-spot';
            parkingSpot2.style.width = '80px';
            parkingSpot2.style.height = '120px';
            parkingSpot2.style.top = '200px';
            parkingSpot2.style.left = '400px';
            parkingArea.appendChild(parkingSpot2);
            
            const parkingSpot3 = document.createElement('div');
            parkingSpot3.className = 'parking-spot';
            parkingSpot3.style.width = '80px';
            parkingSpot3.style.height = '120px';
            parkingSpot3.style.top = '200px';
            parkingSpot3.style.left = '500px';
            parkingArea.appendChild(parkingSpot3);
            
            // Resetar vari√°veis
            parkingMoves = 0;
            carRotation = 0;
            carPosition = { x: 50, y: 50 };
            
            document.getElementById('parkingMoves').textContent = '0';
            document.getElementById('parkingResult').className = 'result-message';
            document.getElementById('parkingResult').textContent = '';
            
            // Definir vaga alvo (a primeira)
            window.targetParkingSpot = parkingSpot1;
        }

        function moveCar(direction) {
            const car = document.getElementById('car');
            let newX = carPosition.x;
            let newY = carPosition.y;
            
            switch(direction) {
                case 'left':
                    newX = Math.max(10, carPosition.x - 10);
                    break;
                case 'right':
                    newX = Math.min(730, carPosition.x + 10);
                    break;
                case 'up':
                    newY = Math.max(10, carPosition.y - 10);
                    break;
                case 'down':
                    newY = Math.min(280, carPosition.y + 10);
                    break;
            }
            
            carPosition.x = newX;
            carPosition.y = newY;
            
            car.style.left = `${newX}px`;
            car.style.top = `${newY}px`;
            
            parkingMoves++;
            document.getElementById('parkingMoves').textContent = parkingMoves;
        }

        function rotateCar() {
            const car = document.getElementById('car');
            carRotation = (carRotation + 90) % 360;
            car.style.transform = `rotate(${carRotation}deg)`;
            
            parkingMoves++;
            document.getElementById('parkingMoves').textContent = parkingMoves;
        }

        function checkParking() {
            const car = document.getElementById('car');
            const targetSpot = window.targetParkingSpot;
            const resultMessage = document.getElementById('parkingResult');
            
            const carRect = {
                left: carPosition.x,
                top: carPosition.y,
                right: carPosition.x + 60,
                bottom: carPosition.y + 100
            };
            
            const spotRect = {
                left: parseInt(targetSpot.style.left),
                top: parseInt(targetSpot.style.top),
                right: parseInt(targetSpot.style.left) + 80,
                bottom: parseInt(targetSpot.style.top) + 120
            };
            
            // Verificar se o carro est√° dentro da vaga
            const isInSpot = 
                carRect.left >= spotRect.left &&
                carRect.right <= spotRect.right &&
                carRect.top >= spotRect.top &&
                carRect.bottom <= spotRect.bottom;
            
            // Verificar se o carro est√° alinhado (√¢ngulo correto)
            const isAligned = carRotation === 0 || carRotation === 180;
            
            if (isInSpot && isAligned) {
                resultMessage.textContent = "üéâ Parab√©ns! Voc√™ estacionou perfeitamente!";
                resultMessage.className = 'result-message success';
                gameData.parking.completed = true;
                progress.parking = true;
                updateProgress();
            } else if (isInSpot && !isAligned) {
                resultMessage.textContent = "Quase l√°! O carro est√° na vaga, mas n√£o est√° alinhado corretamente. Tente girar o carro para 0¬∞ ou 180¬∞.";
                resultMessage.className = 'result-message error';
            } else {
                resultMessage.textContent = "Tente novamente! O carro n√£o est√° dentro da vaga de estacionamento.";
                resultMessage.className = 'result-message error';
            }
        }

        function resetParking() {
            startParking();
        }

        function showParkingHint() {
            const resultMessage = document.getElementById('parkingResult');
            resultMessage.textContent = "üí° Dica: Use as setas para mover o carro lentamente at√© a vaga tracejada √† direita. Use o bot√£o 'Girar' para alinhar o carro com a vaga (0¬∞ ou 180¬∞). O objetivo √© colocar o carro completamente dentro da √°rea tracejada.";
            resultMessage.className = 'result-message success';
        }

        // Prioridades no Tr√¢nsito
        function setupPriorityGame() {
            document.getElementById('prioritySubmit').addEventListener('click', submitPriorityAnswer);
            document.getElementById('priorityNext').addEventListener('click', nextPriorityScenario);
        }

        function startPriority() {
            gameData.priority.currentScenario = 0;
            gameData.priority.score = 0;
            gameData.priority.completed = false;
            updatePriorityUI();
        }

        function updatePriorityUI() {
            const priority = gameData.priority;
            const currentS = priority.scenarios[priority.currentScenario];
            
            document.getElementById('priorityQuestion').textContent = currentS.question;
            document.getElementById('priorityNum').textContent = priority.currentScenario + 1;
            document.getElementById('priorityScore').textContent = priority.score;
            
            const optionsContainer = document.getElementById('priorityOptions');
            optionsContainer.innerHTML = '';
            
            currentS.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'quiz-option';
                optionElement.dataset.option = String.fromCharCode(65 + index);
                optionElement.textContent = option;
                
                optionElement.addEventListener('click', function() {
                    // Remover sele√ß√£o anterior
                    document.querySelectorAll('#priorityOptions .quiz-option').forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    
                    // Selecionar nova op√ß√£o
                    this.classList.add('selected');
                    selectedOption = this.dataset.option;
                    
                    // Ativar bot√£o de confirmar
                    document.getElementById('prioritySubmit').disabled = false;
                });
                
                optionsContainer.appendChild(optionElement);
            });
            
            document.getElementById('prioritySubmit').disabled = true;
            document.getElementById('prioritySubmit').style.display = 'block';
            document.getElementById('priorityNext').style.display = 'none';
            document.getElementById('priorityResult').className = 'result-message';
            document.getElementById('priorityResult').textContent = '';
        }

        function submitPriorityAnswer() {
            const priority = gameData.priority;
            const currentS = priority.scenarios[priority.currentScenario];
            const options = document.querySelectorAll('#priorityOptions .quiz-option');
            const resultMessage = document.getElementById('priorityResult');
            
            // Verificar resposta
            const correctIndex = currentS.correct;
            const selectedIndex = selectedOption.charCodeAt(0) - 65;
            
            if (selectedIndex === correctIndex) {
                // Resposta correta
                priority.score += 25;
                options[selectedIndex].classList.add('correct');
                resultMessage.textContent = "‚úì Correto! Voc√™ entende bem as prioridades no tr√¢nsito!";
                resultMessage.className = 'result-message success';
            } else {
                // Resposta incorreta
                options[selectedIndex].classList.add('wrong');
                options[correctIndex].classList.add('correct');
                resultMessage.textContent = `‚úó Incorreto. A resposta correta √©: ${currentS.options[correctIndex]}`;
                resultMessage.className = 'result-message error';
            }
            
            // Atualizar pontua√ß√£o
            document.getElementById('priorityScore').textContent = priority.score;
            
            // Mostrar bot√£o para pr√≥ximo cen√°rio
            document.getElementById('prioritySubmit').style.display = 'none';
            document.getElementById('priorityNext').style.display = 'block';
        }

        function nextPriorityScenario() {
            gameData.priority.currentScenario++;
            
            if (gameData.priority.currentScenario < gameData.priority.scenarios.length) {
                updatePriorityUI();
            } else {
                // Fim do jogo de prioridades
                gameData.priority.completed = true;
                progress.priority = true;
                updateProgress();
                
                document.getElementById('priorityQuestion').textContent = "Treino de prioridades conclu√≠do!";
                document.getElementById('priorityNum').textContent = "4/4";
                
                const optionsContainer = document.getElementById('priorityOptions');
                optionsContainer.innerHTML = `
                    <div style="text-align: center; padding: 30px;">
                        <h3 style="color: #1e3c72; margin-bottom: 15px;">Resultado Final</h3>
                        <p style="font-size: 1.2rem; margin-bottom: 10px;">Sua pontua√ß√£o: <strong>${gameData.priority.score} de 100 pontos</strong></p>
                        <p style="font-size: 1.1rem; color: ${gameData.priority.score >= 75 ? '#4CAF50' : '#f44336'}">
                            ${gameData.priority.score >= 75 ? "üö¶ Excelente! Voc√™ domina as regras de prioridade no tr√¢nsito!" : "üìñ Continue praticando para entender melhor as prioridades!"}
                        </p>
                    </div>
                `;
                
                document.getElementById('prioritySubmit').style.display = 'none';
                document.getElementById('priorityNext').style.display = 'none';
                document.getElementById('priorityResult').className = 'result-message';
                document.getElementById('priorityResult').textContent = '';
            }
        }

        // Inicializar o jogo quando a p√°gina carregar
        window.addEventListener('DOMContentLoaded', initGame);
    </script>
</body>
</html>
